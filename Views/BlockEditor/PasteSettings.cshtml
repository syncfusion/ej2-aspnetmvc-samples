@using Syncfusion.EJ2.BlockEditor
@using Syncfusion.EJ2

@section ControlsSection {
    <div class="col-lg-8 control-section">
        <div class="blockeditor-paste">
            @Html.EJS().BlockEditor("block-editor").Blocks((List<EJ2MVCSampleBrowser.Models.BlockData.BlockModel>)ViewData["BlockDataPaste"]).Height("600px").Render()
        </div>
    </div>
    <div class="col-lg-4 property-section" id="popup">
        <table id="property" title="Properties">
            <tbody>
                <tr>
                    <td><div>Format Option</div></td>
                    <td>
                        <div>
                            @{
                                var data = new[] {
                                        new { Id = "plainText", Format = "Plain Text" },
                                        new { Id = "keepFormat", Format = "Keep Format" }
                                    };
                            }
                            @Html.EJS().DropDownList("formatOption").DataSource(data).Index(1).PopupHeight("200px").Fields(new Syncfusion.EJ2.DropDowns.DropDownListFieldSettings { Text = "Format", Value = "Id" }).Change("formatChange").Render()
                        </div>
                    </td>
                </tr>
                <tr>
                    <td><div>Denied Tags</div></td>
                    <td>
                        <div>
                            @Html.EJS().TextBox("deniedTagsBox").Placeholder("'img[!href]', 'h1'").Blur("onDeniedTagsChange").Render()
                        </div>
                    </td>
                </tr>
                <tr>
                    <td><div>Allowed Style Properties</div></td>
                    <td>
                        <div>
                            @Html.EJS().TextBox("allowedStylesBox").Placeholder("'href', 'style'").Blur("onAllowedStylesChange").Render()
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
	@*custom code start*@
	<style>
	    .blockeditor-paste {
	        width: 100%;
	        margin: 0 auto;
	    }
	</style>
	@*custom code end*@
	}

@section PreScripts {
    <script>
        var pasteCleanupSettings = {
            deniedTags: ['script', 'iframe'],
        };

        // Sample helper: resolve the Block Editor instance from the page (used by all setters below)
        function getBlockEditor() {
            var blockEditor = ej.base.getComponent(document.getElementById('block-editor'), 'blockeditor');
            return blockEditor;
        }

        // Sample integration: push the current pasteSettings object into the editor and rebind
        function updatePasteSettings() {
            var blockEditor = getBlockEditor();
            if (!blockEditor) {
                return;
            }
            blockEditor.pasteCleanupSettings = { ...pasteCleanupSettings };
            blockEditor.dataBind();
        }

        // Sample integration: dropdown toggle between Plain Text vs Keep Format and apply to editor
        function formatChange(args) {
            if (args.value === "plainText") {
                pasteCleanupSettings.plainText = true;
                pasteCleanupSettings.keepFormat = false;
            } else {
                pasteCleanupSettings.plainText = false;
                pasteCleanupSettings.keepFormat = true;
            }
            updatePasteSettings();
        }

        // Sample integration: parse comma-separated denied tags textbox and apply to editor paste settings
        function onDeniedTagsChange(args) {
            var value = args.value;
            if (value) {
                var tags = value.split(',').map(function (s) {
                    return s.trim().replace(/^['"]|['"]$/g, '');
                }).filter(function (s) { return s !== ''; });
                pasteCleanupSettings.deniedTags = tags;
                updatePasteSettings();
            }
        }

        // Sample integration: parse comma-separated allowed style properties textbox and apply to editor
        function onAllowedStylesChange(args) {
            var value = args.value;
            if (value) {
                var styles = value.split(',').map(function (s) {
                    return s.trim().replace(/^['"]|['"]$/g, '');
                }).filter(function (s) { return s !== ''; });
                pasteCleanupSettings.allowedStyles = styles;
                updatePasteSettings();
            }
        }
    </script>
    @*custom code end*@
}

@section Meta {
    <meta name="description" content="This example demonstrates the PasteCleanupSettings in ASP.NET MVC BlockEditor control. Explore here for more details." />
}

@section ActionDescription {
    <div id="action-description">
        <p>
            This sample demonstrates the Block Editor <code>pasteCleanupSettings</code> property, which allows you to define various options to control how content is pasted into the editor.
        </p>
    </div>
}

@section Description {
    <div id="description">
        <p>The following settings are available to clean up the content in the pasteCleanup settings property:</p>
        <ul>
            <li>Select any option in the <code>Format Option</code> dropdown list for the pasted content.</li>
            <ul>
                <li>Select the <code>Plain Text</code> option to paste the content as plain text.</li>
                <li>Select the <code>Keep Format</code> option to retain the format of the copied content.</li>
            </ul>
            <li>Fill the <code>Denied Tags</code> textbox to ignore specific tags when pasting HTML content.</li>
            <ul>
                <li><code>['a[!href]']</code> - Paste the content by filtering anchor tags that don't have the 'href' attribute.</li>
                <li><code>['a[href, target]']</code> - Paste the content by filtering anchor tags that have the 'href' and 'target' attributes.</li>
            </ul>
            <li>Fill the <code>Allowed Style</code> properties to paste the content by accepting these style attributes and removing others.</li>
            <ul>
                <li><code>['color', 'margin']</code> - This will allow only the style properties 'color' and 'margin' in each pasted element.</li>
            </ul>
        </ul>
    </div>
}

@section Title {
    <title>ASP.NET MVC BlockEditor PasteSettings Example - Syncfusion Demos</title>
}

@section Header {
    <h1 class='sb-sample-text'>Example of PasteSettings in ASP.NET MVC BlockEditor Control</h1>
}